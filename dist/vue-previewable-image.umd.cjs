(function(o,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue"),require("viewerjs")):typeof define=="function"&&define.amd?define(["exports","vue","viewerjs"],n):(o=typeof globalThis<"u"?globalThis:o||self,n(o.VuePreviewableImage={},o.Vue,o.Viewer))})(this,function(o,n,y){"use strict";const L="";function P(r){return typeof r[0]=="string"}const S=n.defineComponent({name:"PreviewableImage",props:{width:{type:String,default:void 0},height:{type:String,default:void 0},src:{type:String,default:""},alt:{type:String,default:""},fit:{type:String,default:"fill"},previewSrcList:{type:Array,default:()=>[]},currentPreviewIndex:{type:Number,default:0},viewerOptions:{type:Object,default:()=>({})},viewerTitle:{type:Function,default:void 0}},emits:["switch","update:currentPreviewIndex"],setup(r,{emit:i}){const{previewSrcList:a,currentPreviewIndex:h}=n.toRefs(r),l=n.ref(),c=n.computed(()=>({"--img-object-fit":r.fit})),d=n.computed(()=>a.value&&a.value.length>0),f=n.computed(()=>d.value?P(a.value)?a.value.map(t=>({src:t,alt:t})):a.value:[]),e=n.computed({get(){return h.value},set(t){i("update:currentPreviewIndex",t)}}),s=n.computed(()=>a.value.length||0),g=()=>{const t=document.createElement("div");return f.value.forEach(_=>{const m=new Image;Object.keys(_).forEach(b=>{m[b]=_[b]}),t.appendChild(m)}),t.addEventListener("view",_=>{const m=_;e.value=m.detail.index,i("switch",e.value,l.value)}),t},v=n.computed(()=>r.viewerTitle?t=>r.viewerTitle(t,{index:e.value,total:s.value}):t=>`${t.alt} (${e.value+1}/${s.value})`),u=n.computed(()=>Object.assign({title:v.value},r.viewerOptions)),p=()=>{d.value&&(l.value=new y(g(),u.value))};n.watch(a,()=>{p()},{deep:!0});const w=()=>{var t;(t=l.value)==null||t.view(e.value)},$=()=>{p()};return n.onMounted(()=>{$()}),n.onUnmounted(()=>{var t;(t=l.value)==null||t.destroy()}),{PreviewListLength:s,finalPreviewSrcList:f,imgStyleVars:c,viewer:l,handleImgView:w,hasPreviewList:d}}}),R="";function I(r,i,a,h,l,c,d,f){var e=typeof r=="function"?r.options:r;i&&(e.render=i,e.staticRenderFns=a,e._compiled=!0),h&&(e.functional=!0),c&&(e._scopeId="data-v-"+c);var s;if(d?(s=function(u){u=u||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!u&&typeof __VUE_SSR_CONTEXT__<"u"&&(u=__VUE_SSR_CONTEXT__),l&&l.call(this,u),u&&u._registeredComponents&&u._registeredComponents.add(d)},e._ssrRegister=s):l&&(s=f?function(){l.call(this,(e.functional?this.parent:this).$root.$options.shadowRoot)}:l),s)if(e.functional){e._injectStyles=s;var g=e.render;e.render=function(p,w){return s.call(w),g(p,w)}}else{var v=e.beforeCreate;e.beforeCreate=v?[].concat(v,s):[s]}return{exports:r,options:e}}var C=function(){var i=this,a=i._self._c;return i._self._setupProxy,a("div",{staticClass:"previewable-image",style:[{width:i.width,height:i.height},i.imgStyleVars]},[a("img",{class:["previewable-image__inner",{"previewable-image__preview":i.hasPreviewList}],attrs:{src:i.src,alt:i.alt},on:{click:i.handleImgView}})])},V=[],T=I(S,C,V,!1,null,null,null,null);const O=T.exports;o.Viewer=y,o.PreviewableImage=O,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
