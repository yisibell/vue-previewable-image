(function(l,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("viewerjs")):typeof define=="function"&&define.amd?define(["exports","vue","viewerjs"],t):(l=typeof globalThis<"u"?globalThis:l||self,t(l.VuePreviewableImage={},l.Vue,l.Viewer))})(this,function(l,t,y){"use strict";const T="",b=t.defineComponent({name:"PreviewableImage",props:{width:{type:String},height:{type:String},src:{type:String},alt:{type:String},fit:{type:String,default:"fill"},previewSrcList:{type:Array,default:()=>[]},viewerOptions:{type:Object},viewerTitle:{type:Function}},emits:["switch"],setup(s,{emit:n}){const{previewSrcList:o}=t.toRefs(s),m=t.computed(()=>({"--img-object-fit":s.fit})),u=t.computed(()=>o.value&&o.value.length>0),d=t.computed(()=>u.value?o.value.map(e=>({src:typeof e=="string"?e:e.src,alt:typeof e=="string"?e:e.alt})):[]),c=t.ref(0),f=t.computed(()=>o.value.length||0),i=()=>{const e=document.createElement("div");return d.value.forEach(w=>{const v=new Image;v.src=w.src,v.alt=w.alt||"",e.appendChild(v)}),e.addEventListener("view",w=>{const v=w;c.value=v.detail.index,n("switch",c.value,r.value)}),e},r=t.ref(),h=t.computed(()=>s.viewerTitle?e=>s.viewerTitle(e,{index:c.value,total:f.value}):e=>`${e.alt} [${c.value+1}/${f.value}]`),p=t.computed(()=>Object.assign({title:h.value},s.viewerOptions)),a=()=>{u.value&&(r.value=new y(i(),p.value))};t.watch(o,()=>{a()},{deep:!0});const g=()=>{var e;(e=r.value)==null||e.view()},_=()=>{a()};return t.onMounted(()=>{_()}),t.onUnmounted(()=>{var e;(e=r.value)==null||e.destroy()}),{currentViewerIndex:c,PreviewListLength:f,finalPreviewSrcList:d,imgStyleVars:m,viewer:r,handleImgView:g,hasPreviewList:u}}}),$="";function S(s,n,o,m,u,d,c,f){var i=typeof s=="function"?s.options:s;n&&(i.render=n,i.staticRenderFns=o,i._compiled=!0),m&&(i.functional=!0),d&&(i._scopeId="data-v-"+d);var r;if(c?(r=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!a&&typeof __VUE_SSR_CONTEXT__<"u"&&(a=__VUE_SSR_CONTEXT__),u&&u.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(c)},i._ssrRegister=r):u&&(r=f?function(){u.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:u),r)if(i.functional){i._injectStyles=r;var h=i.render;i.render=function(g,_){return r.call(_),h(g,_)}}else{var p=i.beforeCreate;i.beforeCreate=p?[].concat(p,r):[r]}return{exports:s,options:i}}var C=function(){var n=this,o=n._self._c;return n._self._setupProxy,o("div",{staticClass:"previewable-image",style:[{width:n.width,height:n.height},n.imgStyleVars]},[o("img",{class:["previewable-image__inner",{"previewable-image__preview":n.hasPreviewList}],attrs:{src:n.src,alt:n.alt},on:{click:n.handleImgView}})])},P=[],V=S(b,C,P,!1,null,null,null,null);const I=V.exports;l.Viewer=y,l.PreviewableImage=I,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
