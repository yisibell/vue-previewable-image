(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("viewerjs")):typeof define=="function"&&define.amd?define(["exports","vue","viewerjs"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.VuePreviewableImage={},n.Vue,n.Viewer))})(this,function(n,e,m){"use strict";const L="",g=e.defineComponent({name:"PreviewableImage",props:{width:{type:String},height:{type:String},src:{type:String},alt:{type:String},fit:{type:String,default:"fill"},previewSrcList:{type:Array,default:()=>[]},viewerOptions:{type:Object},viewerTitle:{type:Function}},emits:["switch"],setup(t,{emit:s}){const{previewSrcList:r}=e.toRefs(t),c=e.computed(()=>({"--img-object-fit":t.fit})),l=e.computed(()=>r.value&&r.value.length>0),w=e.computed(()=>l.value?r.value.map(i=>({src:typeof i=="string"?i:i.src,alt:typeof i=="string"?i:i.alt})):[]),a=e.ref(0),p=e.computed(()=>r.value.length||0),S=()=>{const i=document.createElement("div");return w.value.forEach(d=>{const o=new Image;o.src=d.src,o.alt=d.alt||"",i.appendChild(o)}),i.addEventListener("view",d=>{const o=d;a.value=o.detail.index,s("switch",a.value,u.value)}),i},u=e.ref(),_=e.computed(()=>t.viewerTitle?i=>t.viewerTitle(i,{index:a.value,total:p.value}):i=>`${i.alt} [${a.value+1}/${p.value}]`),V=e.computed(()=>Object.assign({title:_.value},t.viewerOptions)),f=()=>{l.value&&(u.value=new m(S(),V.value))};e.watch(r,()=>{f()},{deep:!0});const I=()=>{var i;(i=u.value)==null||i.view()},P=()=>{f()};return e.onMounted(()=>{P()}),{currentViewerIndex:a,PreviewListLength:p,finalPreviewSrcList:w,imgStyleVars:c,viewer:u,handleImgView:I,hasPreviewList:l}}}),j="",v=(t,s)=>{const r=t.__vccOpts||t;for(const[c,l]of s)r[c]=l;return r},h=["src","alt"];function y(t,s,r,c,l,w){return e.openBlock(),e.createElementBlock("div",{class:"previewable-image",style:e.normalizeStyle([{width:t.width,height:t.height},t.imgStyleVars])},[e.createElementVNode("img",{src:t.src,alt:t.alt,class:e.normalizeClass(["previewable-image__inner",{"previewable-image__preview":t.hasPreviewList}]),onClick:s[0]||(s[0]=(...a)=>t.handleImgView&&t.handleImgView(...a))},null,10,h)],4)}const b=v(g,[["render",y]]);n.Viewer=m,n.PreviewableImage=b,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
